---
responders:
# Initial page
- when:
    http:
      method: GET
      path: /
  then:
    http:
      status: 200
    headers:
      Content-Type: text/html
    body: |
      <html>
        <body>
          <form method="post" action="/login">
            <input type="submit" value="Login" />
          </form>
        </body>
      </html>

# Login form post
- when:
    http:
      method: POST
      path: /login
    headers:
      Content-Type: application/x-www-form-urlencoded
  then:
    http:
      status: 301
    headers:
      Location: /secure

# Secure area
- when:
    http:
      method: GET
      path: /secure
  then:
    http:
      status: 200
    headers:
      Content-Type: text/html
    body: |
      <html>
        <body>Logged In</body>
      </html>
